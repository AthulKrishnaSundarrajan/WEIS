$schema: "http://json-schema.org/draft-07/schema#"
$id: DFSM_toolbox_schema
title: DFSM toolbox schema
description: Scehma that describes the analysis and optimization options for WEIS
type: object
properties:
    input_data:
        type: object
        default: {}
        properties:
            datapath:
                type: string
                description: Name of the folder that contains the .outb files used to construct the DFSM model
            reqd_states:
                type: array
                description: List of the states to be used in the DFSM model. The names of the quantities must be the same as OpenFAST names 
                default: ['GenSpeed']
                items:
                    type: string
                    uniqueItems: True 
            reqd_controls:
                type: array
                description: List of the controls to be used in the DFSM model. The names of the quantities must be the same as OpenFAST names 
                default: ['RtVAvgxh']
                items:
                    type: string
                    uniqueItems: True
            reqd_outputs:
                type: array
                description: List of the controls to be used in the DFSM model. The names of the quantities must be the same as OpenFAST names 
                default: ['GenPwr']
                items:
                    type: string
                    uniqueItems: True                   
    DFSM_properties:
        type: object
        default: {}
        properties:
            L_type:
                type: string
                description: Type of the linear model to be used in the multifidelity DFSM model
                default: LTI
                enum: [None,LTI,LPV]
            LPV_options:
                type: object
                default: {}
                description: Meta options to setup the LPV model
                properties: 
                    v_min:
                        type: number
                        description: The lower limit of the wind/current speed for the LPV range
                        default: 1.85
                    v_max:
                        type: number
                        description: The upper limit of the wind/current speed for the LPV range
                        default: 2.15
                    nv:
                        type: integer
                        description: Number of wind/current speeds between v_min and v_max for which the linear models must be constructed
                        default: 50           
            N_type:
                type: string
                description: Type of nonlinear model to be used in the multifidelity DFSM model
                default:GPR
                enum:[None,GPR,NN]
            GPR_options:
                url: https://scikit-learn.org/stable/auto_examples/gaussian_process/plot_gpr_noisy_targets.html
                type: object
                default: {}
                description: Options used to construct the GPR based nonlinear function
                properties:
                    kernel:
                        type: string
                        description: The kernel used for the GPR model
                        default: RBF   
                        enum: [RBF,matern,quad,exp-sine,dot]                
                    length_scale: 
                        type: number
                        default: 1
                        description: Length scale for the kernel
                    lscale_bounds:
                        type: array
                        default: [1e-5,1e5]
                        description: bounds on the length scale
                        items: 
                            type: integer
                    n_restarts_optimizer:
                        type: integer
                        description: Number of times the hyperparameter-optimizer is started for GPR
                        default: 5
                        maximum: 100
                        minimum: 1
                    random_state:
                        type: integer
                        description: Random state to be set for constructing the GPR model
                        default: 34534
                        maximum:1000000
                        minimum:0
            NN_options:
                url: https://scikit-learn.org/stable/modules/generated/sklearn.neural_network.MLPClassifier.html
                type: object 
                default: {}
                description: Options used to construct the NN based nonlinear function
                properties:
                    hidden_layer_size:
                        type: array
                        description: size/shape of the hidden layer used in the NN network
                        default: [50,10]     
                        items:
                            type: integer
                    max_iter:
                        type: integer
                        description: maximum iterations of the solver used to fit the NN
                        default: 300
                    activation:
                        type: string
                        description: The type of activation function used in the NN model
                        default: tanh
                        enum: [identity, logistic, tanh, relu]
                    solver:
                        type: string
                        description: The type of solver used in the finding th hyper parameters for the NN model
                        default: adam
                        enum: [lbfgs, sgd, adam]
                    tol:
                        type: number 
                        description: Tolerence for the solver
                        default: 1e-5
            solver_options:
                url: https://docs.scipy.org/doc/scipy/reference/generated/scipy.integrate.solve_ivp.html
                type: object
                default: {}
                description: Options used for the ode solver used to simulate the DFSM
                properties:
                    method:
                        type: string
                        description: The algorithm used in the ode solver
                        default: RK45
                        enum: [RK45,RK23,DOP853,Radau,BDF,LSODA] 
                    rtol:
                        type: number 
                        description: The relative tolerence used for the solver
                        default: 1e-6
                    atol:
                        type: number
                        description: The absolute tolerence used for the solver
                        default: 1e-6
                        
                    
                    
                    
                    
                    
                

