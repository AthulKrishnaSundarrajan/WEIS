general:
    folder_output: output
    fname_output: refturb_output
design_variables:
  control:
    tsr:
      flag: False     # Flag to optimize the rotor tip speed ratio
      min_gain: 0.9   # Nondimensional lower bound
      max_gain: 1.1   # Nondimensional upper bound
    servo:
      pitch_control:
        omega:
          flag: True
          min: 0.1
          max: 0.5

  tower:
    outer_diameter:
      flag: False
      lower_bound: 3.87
      upper_bound: 10.0
    layer_thickness:
      flag: False
      lower_bound: 4.e-3
      upper_bound: 2.e-1

  floating:
    joints:
      draft:
        # Adjusts the z-coordinate of the listed joints
        linked_joints:
          # This will set the same z-value for all of the joints listed in the same names entry
          - names: [col1_keel, col2_keel, col3_keel]
            flag: False
            lower_bound: -100.0
            upper_bound: -5.0
        independent_joints:
          # This will adjust the z-coordinate of the joints separately
          - name: maincol_keel
            flag: False
            lower_bound: -100.0
            upper_bound: -5.0
        column_spacing:
          # Adjusts the x/y-coordinate of the listed joints to be a desired radius from (0,0)
          linked_joints:
            # This will set the x,y-value for all of the joints listed in the same names entry at constant angle relative to (0,0)
            - names: [col1_keel, col1_freeboard, col1_fairlead, col2_keel, col2_freeboard, col2_fairlead, col3_keel, col3_freeboard, col3_fairlead]
              flag: False
              lower_bound: 5.0
              upper_bound: 75.0
        fairlead_depth:
          # Adjusts the z-coordinate of the listed joints
          linked_joints:
            # This will set the same z-value for all of the joints listed in the same names entry.
            # Instead of operating in absolute z-space, the coordinate value is non-dimensional along the member axis (0=joint1)
            - names: [col1_fairlead, col2_fairlead, col3_fairlead]
              flag: False
              lower_bound: 0.0
              upper_bound: 1.0
        pontoon_depth:
          # Adjusts the z-coordinate of the listed joints
          linked_joints:
            # This will set the same z-value for all of the joints listed in the same names entry.
            # Instead of operating in absolute z-space, the coordinate value is non-dimensional along the member axis (0=joint1)
            - names: [col1_pontoon_lower, col2_pontoon_lower, col3_pontoon_lower]
              flag: False
              lower_bound: 0.0
              upper_bound: 1.0
            - names: [col1_pontoon_upper, col2_pontoon_upper, col3_pontoon_upper]
              flag: False
              lower_bound: 0.0
              upper_bound: 1.0
    members:
        flag: True
        groups:
            - names: [spar]
              ballast:
                  lower_bound: 0.8e3
                  upper_bound: 1.5e3
    mooring:
      anchor_radius:
        # This adjusts the radius of all anchor nodes from (0,0)
        flag: False
        lower_bound: 10.0
        upper_bound: 1000.0
      line_length:
        # Adjust the unstretched line length of the mooring segments
        linked_lines:
          # This will set the same line length for all segments listed in the same names entry
          - names: [line1, line2, line3]
            flag: False
            lower_bound: 100.0
            upper_bound: 2000.0
          - names: [bridle11, bridle12, bridle21, bridle22, bridle31, bridle32]
            flag: False
            lower_bound: 100.0
            upper_bound: 2000.0
      line_diameter:
        # Adjust the diameter of the mooring segments
        linked_lines:
          # This will set the same diameter for all segments listed in the same names entry
          - names: [line1, line2, line3]
            flag: False
            lower_bound: 0.1
            upper_bound: 2.0
          - names: [bridle11, bridle12, bridle21, bridle22, bridle31, bridle32]
            flag: False
            lower_bound: 0.1
            upper_bound: 2.0

merit_figure: platform_mass  # Merit figure of the optimization problem. The options are 'AEP' - 'LCOE' - 'Cp' - 'blade_mass' - 'blade_tip_deflection'

constraints:
  blade:
    strains_spar_cap_ss:
      flag: False     # Flag to impose constraints on maximum strains (absolute value) in the spar cap on the blade suction side
      max:  3500.e-6  # Value of maximum strains [-]
    strains_spar_cap_ps:
      flag: False     # Flag to impose constraints on maximum strains (absolute value) in the spar cap on the blade pressure side
      max:  3500.e-6  # Value of maximum strains [-]
    tip_deflection:
      flag: False     # Constraint that maximum tip deflection cannot exceed 70% of tower clearance. Only for upwind rotors
    rail_transport:
      flag: False
      8_axle: False
      4_axle: False
    stall:
      flag: False     # Constraint on minimum stall margin
      margin: 0.05233 # Value of minimum stall margin in [rad]
    chord:
      flag: False # Constraint on maximum chord
      max: 4.75   # Value of maximum chord in [m]
    frequency:
      flap_above_3P: False
      edge_above_3P: False
      flap_below_3P: False
      edge_below_3P: False
    moment_coefficient:
      flag: False
      max: 0.15 #0.16333
      min: 0.13
    match_cl_cd:
      flag_cl: False
      flag_cd: False
      filename: /path2file.txt
    match_L_D:
      flag_L: False
      flag_D: False
      filename: /path2file.txt
  tower:
    height_constraint:
      flag: False
      lower_bound: 1.e-2
      upper_bound: 1.e-2
    stress:
      flag: False
    global_buckling:
      flag: False
    shell_buckling:
      flag: False
    constr_d_to_t:
      flag: False
    constr_taper:
      flag: False
    slope:
      flag: False
    frequency_1:
      flag: False
      lower_bound: 0.13
      upper_bound: 0.40
  control:
    flap_control:
      flag: False
      min: 0.0
      max: 0.1
    rotor_overspeed:
      flag: True # True
      min: 0.0
      max: 0.2
    Max_PtfmPitch:
      flag: True
      max: 5.5
    Std_PtfmPitch:
      flag: False
      max: 2.

  # floating:
  #   operational_heel:
  #       upper_bound: 0.08726646259971647 # 5 deg
  #   survival_heel:
  #       upper_bound: 0.17453292519943295 # 10 deg
  #   max_surge:
  #       flag: false
  #       upper_bound: 0.1
  #   buoyancy:
  #       flag: False
  #   fixed_ballast_capacity:
  #       flag: False
  #   variable_ballast_capacity:
  #       flag: False
  #   metacentric_height:
  #       flag: False
  #   freeboard_margin:
  #       flag: false
  #   draft_margin:
  #       flag: false
  #   fairlead_depth:
  #       flag: false
  #   mooring_surge:
  #       flag: false
  #   mooring_heel:
  #       flag: false
  #   mooring_tension:
  #       flag: false
  #   mooring_length:
  #       flag: false

driver:
  optimization:
    flag: True
    tol: 1.e-3            # Optimality tolerance
    xtol: 1.e-2           # Optimality tolerance for design variables
    max_major_iter: 10    # Maximum number of major design iterations (SNOPT)
    max_minor_iter: 100   # Maximum number of minor design iterations (SNOPT)
    max_iter: 2           # Maximum number of iterations (SLSQP)
    solver: LN_COBYLA     # Optimization solver. Other options are 'SLSQP' - 'CONMIN'
    step_size: 1.e-3      # Step size for finite differencing
    form: central         # Finite differencing mode, either forward or central
  design_of_experiments:
    flag: False           # Flag to enable design of experiments
    run_parallel: True    # Flag to run using parallel processing
    generator: FullFact    # Type of input generator. (Uniform)
    num_samples: 12            # number of samples for (Uniform only)
    
recorder:
    flag: True              # Flag to activate OpenMDAO recorder
    file_name: log_opt.sql  # Name of OpenMDAO recorder
    includes: ['floatingse.platform_mass']
